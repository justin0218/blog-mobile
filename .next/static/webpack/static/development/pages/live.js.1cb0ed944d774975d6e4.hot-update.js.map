{"version":3,"file":"static/webpack/static/development/pages/live.js.1cb0ed944d774975d6e4.hot-update.js","sources":["webpack:///./pages/live.js"],"sourcesContent":["import Layout from '../components/layout'\nimport {getTpValue} from '../utils/blog_types'\nimport moment from 'moment'\nimport {apiHost} from '../utils/config';\nimport protobuf from \"../proto/blog_pb\";\nimport axios from 'axios'\nimport readStream from '../utils/util'\n\nexport default class extends React.Component {\n  static async getInitialProps({ req,query,jsonPageRes }) {\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\n    return { userAgent,query,jsonPageRes }\n  }\n\n  state = {\n      blogDtail:\"\"\n  }\n\n  async componentDidMount(){\n    let res = await axios.get(`${apiHost}/v1/blog/detail?id=35`,{\n      responseType: 'blob'\n    })\n    let data = await readStream(res.data);\n    let message = protobuf.detailRes.deserializeBinary(data);\n    data = message.toObject();\n    // console.log(data)\n    let hres = await axios.get(`${apiHost}/tool/file/read?key=${data.htmlTxtUrl}`,{\n      responseType: 'blob'\n    })\n    let hdata = await readStream(hres.data);\n    let hmessage = protobuf.fileReadRes.deserializeBinary(hdata);\n    hdata = hmessage.toObject();\n    this.setState({blogDtail:hdata.txt})\n    setTimeout(()=>{\n      document.getElementById(\"t\").setAttribute(\"class\",\"shadownone\")\n      document.getElementById(\"loading\").style.display = \"none\";\n    },500)\n  }\n\n  render() {\n    const {blogDtail,detailData,commentsList,loadings,saytext,commentTotal} = this.state\n    return (\n      <Layout title={`直播`}>\n         \n          <style jsx>{`\n          \n          `}</style>\n      </Layout>     \n    )\n  }\n}\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AAOA;AACA;AADA;AACA;;;;;;;;;;;;;;;;AAIA;AACA;AADA;AACA;;AADA;;AAGA;AACA;;AADA;AACA;AACA;AACA;;AACA;AACA;AADA;AACA;;AADA;;AAGA;AACA;;AADA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;;;;;;;;;AAxCA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAJA;AACA;;;;;A","sourceRoot":""}