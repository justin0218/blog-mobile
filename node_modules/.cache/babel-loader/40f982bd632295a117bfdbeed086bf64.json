{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nimport Layout from './layout';\nimport tps from '../utils/blog_types'; // import banner from '../images/banner'\n\nimport Event from '../utils/emiter';\nvar timer = null;\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  function _default() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(_default)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      path: \"\",\n      headerTop: 0,\n      opennav: false,\n      opensearch: false\n    });\n\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var p, t;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                p = 0, t = 0;\n\n                document.onscroll = function () {\n                  var p = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n\n                  if (t <= p && p > 0) {\n                    //下滚\n                    Event.emit(\"top\", 1);\n\n                    if (p > 60) {\n                      _this2.setState({\n                        headerTop: -61\n                      });\n                    }\n\n                    _this2.setState({\n                      opennav: false,\n                      searchTxt: \"\",\n                      opensearch: false\n                    });\n                  } else {\n                    //上滚  \n                    Event.emit(\"top\", 2);\n\n                    _this2.setState({\n                      headerTop: 0,\n                      opennav: false,\n                      searchTxt: \"\",\n                      opensearch: false\n                    });\n                  }\n\n                  setTimeout(function () {\n                    t = p;\n                  }, 0);\n                };\n\n                this.setState({\n                  path: location.pathname\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"onSearch\",\n    value: function onSearch(event) {\n      if (this.state.searchTxt == \"\") {\n        return;\n      }\n\n      var e = event || window.event;\n\n      if (e && e.keyCode == 13) {\n        //回车键的键值为13\n        location.href = \"/article?name=\".concat(this.state.searchTxt);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          path = _this$state.path,\n          headerTop = _this$state.headerTop,\n          opennav = _this$state.opennav,\n          opensearch = _this$state.opensearch,\n          searchTxt = _this$state.searchTxt;\n      return React.createElement(\"div\", {\n        className: \"jsx-1515128354\"\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          height: 61,\n          transition: \"0.3s\",\n          WebkitTransition: \"0.3s\",\n          backgroundColor: \"rgba(255,255,255,0.9)\",\n          position: \"fixed\",\n          borderBottom: \"1px solid #ddd\",\n          boxShadow: \"0 1px 1px rgba(0,0,0,.04)\",\n          zIndex: 999,\n          top: headerTop,\n          left: 0\n        },\n        className: \"jsx-1515128354\"\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          margin: \"0 auto\",\n          height: \"100%\",\n          lineHeight: \"60px\",\n          fontSize: 22,\n          position: \"relative\"\n        },\n        className: \"jsx-1515128354\"\n      }, React.createElement(\"div\", {\n        style: {\n          width: \"100%\",\n          textAlign: \"center\",\n          position: \"absolute\",\n          left: 0,\n          top: 0\n        },\n        className: \"jsx-1515128354\"\n      }, \"Simple\"), React.createElement(\"h2\", {\n        id: \"mnavh\",\n        onClick: function onClick() {\n          var open = !opennav;\n\n          _this3.setState({\n            opennav: open\n          });\n        },\n        className: \"jsx-1515128354\" + \" \" + ((opennav ? \"open\" : \"\") || \"\")\n      }, React.createElement(\"span\", {\n        className: \"jsx-1515128354\" + \" \" + \"navicon\"\n      })), React.createElement(\"ul\", {\n        id: \"starlist\",\n        style: {\n          background: \"rgba(0,0,0,.5)\",\n          width: \"100%\",\n          display: opennav ? \"block\" : \"none\"\n        },\n        className: \"jsx-1515128354\"\n      }, React.createElement(\"li\", {\n        className: \"jsx-1515128354\"\n      }, React.createElement(\"a\", {\n        href: \"/\",\n        style: path == \"/\" ? {\n          color: \"#f65a8a\"\n        } : {},\n        className: \"jsx-1515128354\"\n      }, \"\\u9996\\u9875\")), React.createElement(\"li\", {\n        className: \"jsx-1515128354\"\n      }, React.createElement(\"a\", {\n        href: \"/article\",\n        style: path == \"/article\" || path == \"/detail\" ? {\n          color: \"#f65a8a\"\n        } : {},\n        className: \"jsx-1515128354\"\n      }, \"\\u6587\\u7AE0\")), React.createElement(\"li\", {\n        className: \"jsx-1515128354\"\n      }, React.createElement(\"a\", {\n        href: \"/message\",\n        style: path == \"/message\" ? {\n          color: \"#f65a8a\"\n        } : {},\n        className: \"jsx-1515128354\"\n      }, \"\\u7559\\u8A00\")), React.createElement(\"li\", {\n        className: \"jsx-1515128354\"\n      }, React.createElement(\"a\", {\n        href: \"/chat\",\n        style: path == \"/chat\" || path == \"/chatroom\" ? {\n          color: \"#f65a8a\"\n        } : {},\n        className: \"jsx-1515128354\"\n      }, \"\\u804A\\u5929\")), React.createElement(\"li\", {\n        className: \"jsx-1515128354\"\n      }, React.createElement(\"a\", {\n        href: \"/me\",\n        style: path == \"/me\" ? {\n          color: \"#f65a8a\"\n        } : {},\n        className: \"jsx-1515128354\"\n      }, \"\\u5173\\u4E8E\"))), React.createElement(\"div\", {\n        className: \"jsx-1515128354\" + \" \" + ((opensearch ? \"searchbox search_open\" : \"searchbox\") || \"\")\n      }, React.createElement(\"div\", {\n        id: \"search_bar\",\n        style: {\n          width: opensearch ? \"100%\" : 0\n        },\n        className: \"jsx-1515128354\" + \" \" + \"search_bar\"\n      }, React.createElement(\"input\", {\n        placeholder: \"\\u60F3\\u641C\\u70B9\\u4EC0\\u4E48\\u5462..\",\n        onKeyUp: this.onSearch.bind(this),\n        onChange: function onChange(e) {\n          _this3.setState({\n            searchTxt: e.target.value\n          });\n        },\n        type: \"text\",\n        className: \"jsx-1515128354\" + \" \" + \"input\"\n      }), React.createElement(\"p\", {\n        onClick: function onClick() {\n          var o = !opensearch;\n\n          if (!o) {\n            _this3.setState({\n              searchTxt: \"\"\n            });\n          }\n\n          _this3.setState({\n            opensearch: o\n          });\n        },\n        className: \"jsx-1515128354\" + \" \" + \"search_ico\"\n      }, React.createElement(\"span\", {\n        className: \"jsx-1515128354\"\n      })))))), React.createElement(\"div\", {\n        style: {\n          height: 75\n        },\n        className: \"jsx-1515128354\"\n      }), React.createElement(_JSXStyle, {\n        id: \"1515128354\"\n      }, [\".search_open.jsx-1515128354 .search_bar.jsx-1515128354 .input.jsx-1515128354{width:300px;}\", \".search_open.jsx-1515128354 .search_bar.jsx-1515128354 .input.jsx-1515128354{border-bottom:#222 1px solid;background:#fff;}\", \".search_bar.jsx-1515128354 .input.jsx-1515128354{position:absolute;top:16px;right:0;border:none;outline:none;height:30px;line-height:30px;z-index:10;font-size:16px;color:#333;background:none;}\", \".searchbox.jsx-1515128354{position:absolute;right:0;top:1px;}\", \".search_open.jsx-1515128354{width:300px;display:inline-block;}\", \".search_bar.jsx-1515128354{position:relative;width:0%;min-width:60px;height:60px;float:right;overflow:hidden;-webkit-transition:width 0.3s;-moz-transition:width 0.3s;-webkit-transition:width 0.3s;transition:width 0.3s;-webkit-backface-visibility:hidden;}\", \".search_ico.jsx-1515128354,.search_btn.jsx-1515128354{width:60px;height:60px;display:block;position:absolute;right:0;top:0;padding:0;margin:0;line-height:60px;cursor:pointer;text-align:center;z-index:99;}\", \".search_ico.jsx-1515128354 span.jsx-1515128354{position:relative;top:20px;}\", \".search_ico.jsx-1515128354 span.jsx-1515128354:before{top:0;left:0;}\", \".search_ico.jsx-1515128354 span.jsx-1515128354:before{content:' ';position:absolute;width:12px;height:12px;border:1px solid #666;border-radius:10px;}\", \".search_ico.jsx-1515128354 span.jsx-1515128354:after{content:' ';position:absolute;width:12px;height:4px;background:#666;border-radius:5px 0 0 5px;-webkit-transform:rotate(225deg);-moz-transform:rotate(225deg);-ms-transform:rotate(225deg);-o-transform:rotate(225deg);-webkit-transform:rotate(225deg);-ms-transform:rotate(225deg);transform:rotate(225deg);}\", \".search_ico.jsx-1515128354 span.jsx-1515128354:after{right:-22px;top:14px;}\", \".open.jsx-1515128354 .navicon.jsx-1515128354:before{margin-top:0;-webkit-transform:rotate(45deg);-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}\", \".open.jsx-1515128354 .navicon.jsx-1515128354:before,.open.jsx-1515128354 .navicon.jsx-1515128354:after{content:'';display:block;width:30px;height:5px;position:absolute;background:#000;}\", \".open.jsx-1515128354 .navicon.jsx-1515128354{background:none;}\", \".open.jsx-1515128354 .navicon.jsx-1515128354:after{margin-top:0;-webkit-transform:rotate(-45deg);-webkit-transform:rotate(-45deg);-ms-transform:rotate(-45deg);transform:rotate(-45deg);}\", \"#mnavh.jsx-1515128354{position:absolute;display:block;top:8px;left:10px;}\", \".navicon.jsx-1515128354{display:block;position:relative;width:30px;height:5px;background-color:#000;margin-top:20px;}\", \".navicon.jsx-1515128354:before{margin-top:-10px;}\", \".navicon.jsx-1515128354:before,.navicon.jsx-1515128354:after{content:'';display:block;width:30px;height:5px;position:absolute;background:#000;-webkit-transition-property:margin,-webkit-transform;-webkit-transition-property:margin,-webkit-transform;-webkit-transition-property:margin,-webkit-transform;transition-property:margin,-webkit-transform;-webkit-transition-property:margin,-webkit-transform;-webkit-transition-property:margin,transform;transition-property:margin,transform;-webkit-transition-property:margin,-webkit-transform,-webkit-transform;-webkit-transition-property:margin,transform,-webkit-transform;transition-property:margin,transform,-webkit-transform;-webkit-transition-duration:300ms;-webkit-transition-duration:300ms;transition-duration:300ms;}\", \".navicon.jsx-1515128354:after{margin-top:10px;}\", \".navicon.jsx-1515128354:before,.navicon.jsx-1515128354:after{content:'';display:block;width:30px;height:5px;position:absolute;background:#000;-webkit-transition-property:margin,-webkit-transform;-webkit-transition-property:margin,-webkit-transform;-webkit-transition-property:margin,-webkit-transform;transition-property:margin,-webkit-transform;-webkit-transition-property:margin,-webkit-transform;-webkit-transition-property:margin,transform;transition-property:margin,transform;-webkit-transition-property:margin,-webkit-transform,-webkit-transform;-webkit-transition-property:margin,transform,-webkit-transform;transition-property:margin,transform,-webkit-transform;-webkit-transition-duration:300ms;-webkit-transition-duration:300ms;transition-duration:300ms;}\", \"#starlist.jsx-1515128354{-webkit-transition:0.3s;transition:0.3s;overflow:hidden;position:absolute;top:60px;}\", \"#starlist.jsx-1515128354 li.jsx-1515128354{display:block;width:50%;clear:both;border-top:#eaeaea 1px solid;padding:0;background:#FFF;font-size:16px;text-align:center;}\", \"#starlist.jsx-1515128354 li.jsx-1515128354 a.jsx-1515128354{-webkit-text-decoration:none;text-decoration:none;color:#555;}\", \"#starlist.jsx-1515128354 li.jsx-1515128354:last-child{padding-bottom:100%;}\"]));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(_ref) {\n        var req, query, jsonPageRes, userAgent;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                req = _ref.req, query = _ref.query, jsonPageRes = _ref.jsonPageRes;\n                userAgent = req ? req.headers['user-agent'] : navigator.userAgent;\n                return _context2.abrupt(\"return\", {\n                  userAgent: userAgent,\n                  query: query,\n                  jsonPageRes: jsonPageRes\n                });\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return _default;\n}(React.Component);\n\nexport { _default as default };","map":null,"metadata":{},"sourceType":"module"}