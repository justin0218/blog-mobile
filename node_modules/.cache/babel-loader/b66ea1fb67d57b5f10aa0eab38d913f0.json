{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/justin/Desktop/private/blog-mobile/pages/message.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nimport Layout from '../components/layout';\nimport { getTpValue } from '../utils/blog_types';\nimport moment from 'moment';\nimport { apiHost, avatars } from '../utils/config';\nimport protobuf from \"../proto/blog_pb\";\nimport axios from 'axios';\nimport readStream from '../utils/util';\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  function _default() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(_default)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      blogDtail: \"\",\n      detailData: {},\n      commentsList: [],\n      commentTotal: 0,\n      saytext: \"\",\n      submitDisb: false,\n      submitTxt: \"提交\"\n    });\n\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"getComments\",\n    value: function () {\n      var _getComments = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var commentRes, commentData, commentMessage;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(\"\".concat(apiHost, \"/v1/blog/messageboard/list\"), {\n                  responseType: 'blob'\n                });\n\n              case 2:\n                commentRes = _context.sent;\n                _context.next = 5;\n                return readStream(commentRes.data);\n\n              case 5:\n                commentData = _context.sent;\n                commentMessage = protobuf.blogComments.deserializeBinary(commentData);\n                commentMessage = commentMessage.toObject();\n                console.log(commentMessage);\n                this.setState({\n                  commentsList: commentMessage.listList,\n                  commentTotal: commentMessage.total\n                });\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getComments() {\n        return _getComments.apply(this, arguments);\n      }\n\n      return getComments;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.getComments();\n\n              case 2:\n                setTimeout(function () {\n                  document.getElementById(\"t\").setAttribute(\"class\", \"shadownone\");\n                  document.getElementById(\"loading\").style.display = \"none\";\n                }, 500);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"subMitComment\",\n    value: function () {\n      var _subMitComment = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(event) {\n        var e, saytext, message, bytes, res;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                e = event || window.event;\n\n                if (!(e && e.keyCode == 13)) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                //回车键的键值为13\n                saytext = this.state.saytext;\n                saytext = saytext.replace(/\\n/g, \"\");\n\n                if (!(saytext == \"\")) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                alert(\"评论内容不能为空\");\n                return _context3.abrupt(\"return\");\n\n              case 7:\n                message = new protobuf.blogComment();\n                message.setContent(saytext);\n                message.setBlogId(0);\n                bytes = message.serializeBinary();\n                _context3.prev = 11;\n                _context3.next = 14;\n                return axios.post(\"\".concat(apiHost, \"/v1/blog/messageboard/submit\"), bytes, {\n                  headers: {\n                    'Content-Type': 'application/octet-stream'\n                  }\n                });\n\n              case 14:\n                res = _context3.sent;\n                _context3.next = 17;\n                return this.getComments();\n\n              case 17:\n                _context3.next = 22;\n                break;\n\n              case 19:\n                _context3.prev = 19;\n                _context3.t0 = _context3[\"catch\"](11);\n\n                if (_context3.t0 == \"Error: Request failed with status code 400\") {\n                  alert(\"评论内容不能为空\");\n                } else if (_context3.t0 == \"Error: Request failed with status code 500\") {\n                  alert(\"内部出现错误\");\n                } else if (_context3.t0 == \"Error: Request failed with status code 403\") {\n                  alert(\"今天您对改博客的评论已达到上限\");\n                }\n\n              case 22:\n                this.setState({\n                  saytext: \"\"\n                });\n\n              case 23:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[11, 19]]);\n      }));\n\n      function subMitComment(_x) {\n        return _subMitComment.apply(this, arguments);\n      }\n\n      return subMitComment;\n    }()\n  }, {\n    key: \"makeGood\",\n    value: function () {\n      var _makeGood = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var detailData, id, res;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                detailData = this.state.detailData;\n                id = this.props.query.id;\n                _context4.next = 4;\n                return axios.post(\"\".concat(apiHost, \"/v1/blog/good/make?blog_id=\").concat(id));\n\n              case 4:\n                res = _context4.sent;\n                detailData.goodNum++;\n                this.setState({\n                  detailData: detailData\n                });\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function makeGood() {\n        return _makeGood.apply(this, arguments);\n      }\n\n      return makeGood;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          blogDtail = _this$state.blogDtail,\n          detailData = _this$state.detailData,\n          commentsList = _this$state.commentsList,\n          submitDisb = _this$state.submitDisb,\n          saytext = _this$state.saytext,\n          commentTotal = _this$state.commentTotal,\n          submitTxt = _this$state.submitTxt;\n      return React.createElement(Layout, {\n        title: \"\\u7559\\u8A00\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          background: \"#fff\"\n        },\n        className: \"jsx-3171276270\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          clear: 'both'\n        },\n        className: \"jsx-3171276270\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"jsx-3171276270\" + \" \" + \"news_pl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"jsx-3171276270\" + \" \" + \"gbko\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, commentsList.map(function (item, k) {\n        return React.createElement(\"div\", {\n          key: k,\n          className: \"jsx-3171276270\" + \" \" + \"fb\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(\"ul\", {\n          style: {\n            background: \"url(\".concat(avatars[item.id % avatars.length], \") no-repeat top 14px left 10px\")\n          },\n          className: \"jsx-3171276270\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          style: {\n            color: \"#000\"\n          },\n          className: \"jsx-3171276270\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, item.name), React.createElement(\"p\", {\n          className: \"jsx-3171276270\" + \" \" + \"fbtime\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"jsx-3171276270\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, moment(item.createTime).format(\"YYYY-MM-DD\"))), React.createElement(\"p\", {\n          className: \"jsx-3171276270\" + \" \" + \"fbinfo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, item.content)));\n      }), React.createElement(\"div\", {\n        id: \"plpost\",\n        className: \"jsx-3171276270\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: commentsList.length == 0 ? {\n          marginTop: 8\n        } : {},\n        className: \"jsx-3171276270\" + \" \" + \"saying\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"jsx-3171276270\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:void(0)\",\n        style: {\n          textDecoration: \"none\",\n          color: \"#de1513\"\n        },\n        className: \"jsx-3171276270\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"\\u5171\\u6709\", commentTotal, \"\\u6761\\u7559\\u8A00\")), \"\\u6765\\u8BF4\\u4E24\\u53E5\\u5427...\"), React.createElement(\"textarea\", {\n        name: \"saytext\",\n        value: saytext,\n        onChange: function onChange(e) {\n          _this2.setState({\n            saytext: e.target.value\n          });\n        },\n        rows: \"6\",\n        id: \"saytext\",\n        onKeyUp: this.subMitComment.bind(this),\n        className: \"jsx-3171276270\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }))))), React.createElement(_JSXStyle, {\n        id: \"3171276270\",\n        __self: this\n      }, \".nextinfo.jsx-3171276270 a.jsx-3171276270{-webkit-text-decoration:none;text-decoration:none;color:#555;}.nextinfo.jsx-3171276270 a.jsx-3171276270:hover{-webkit-text-decoration:underline;text-decoration:underline;color:#222;}.yzm.jsx-3171276270{margin:10px 10px 10px 0;}#plpost.jsx-3171276270{padding:0 10px;}#plpost.jsx-3171276270 input[type=\\\"submit\\\"].jsx-3171276270{display:block;background:#303030;color:#fff;border:0;line-height:30px;padding:0 20px;border-radius:5px;float:right;margin-bottom:20px;margin-top:13px;margin-right:1%;}#saytext.jsx-3171276270{width:99%;outline:none;resize:none;border:solid 1px #ccc;margin-bottom:20px;}.saying.jsx-3171276270 span.jsx-3171276270{float:right;}.saying.jsx-3171276270{line-height:30px;color:#a9a6a6;margin-bottom:8px;}.news_pl.jsx-3171276270 h2.jsx-3171276270{border-bottom:#000 2px solid;line-height:40px;font-size:14px;padding-left:10px;color:#000;}.fbtime.jsx-3171276270{float:right;color:#999;font-size:12px;width:66px;overflow:hidden;white-space:nowrap;}.fbtime.jsx-3171276270 span.jsx-3171276270{float:right;color:#999;font-size:12px;width:67px;overflow:hidden;white-space:nowrap;}p.fbtime.jsx-3171276270{color:#000;}p.fbinfo.jsx-3171276270{margin:10px 0;word-wrap:break-word;}.fb.jsx-3171276270 ul.jsx-3171276270{margin:10px 10px;padding:10px 10px 10px 70px;border-bottom:#ececec 1px solid;background-size:47px 47px;}.news_pl.jsx-3171276270{width:100%;overflow:hidden;margin:0px 0 20px 0;}.nextinfo.jsx-3171276270{line-height:24px;width:100%;overflow:hidden;margin:20px 0;}.nextinfo.jsx-3171276270>p.jsx-3171276270{padding:4px 10px;border-radius:5px;}.diggit.jsx-3171276270{width:160px;margin:auto;background:#E2523A;color:#fff;box-shadow:1px 2px 6px 0px rgba(0,0,0,.2);border-radius:3px;line-height:40px;text-align:center;cursor:pointer;outline:none;display:block;}.news_about.jsx-3171276270{color:#888888;border:1px solid #F3F3F3;padding:10px;margin:20px auto 15px auto;line-height:23px;background:none repeat 0 0 #F6F6F6;}.bloginfo.jsx-3171276270{width:100%;overflow:hidden;}.news_title.jsx-3171276270{font-size:24px;font-weight:normal;padding:20px 0;color:#333;margin:0;}.bloginfo.jsx-3171276270 li.jsx-3171276270{float:left;margin-right:20px;list-style:none;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qdXN0aW4vRGVza3RvcC9wcml2YXRlL2Jsb2ctbW9iaWxlL3BhZ2VzL21lc3NhZ2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBK0dzQixBQUdrQyxBQUlLLEFBSUEsQUFHWCxBQUdELEFBYUYsQUFPSSxBQUdDLEFBS1ksQUFPakIsQUFRQSxBQVFELEFBR0csQUFJRyxBQU1OLEFBS00sQUFNQSxBQUlMLEFBYU0sQUFRTCxBQUlNLEFBT0osVUFqR0EsQ0FzQ2hCLEFBYWlCLEFBb0NFLEFBV0ksQ0EzRnhCLEFBZWEsQUFRQSxBQW9DQyxFQS9FTyxBQXNERSxBQXNDUSxDQS9GL0IsQUEyR3lCLEVBakZULEFBbUNjLEFBV2pCLEFBTU8sTUE3REosQUFzQkMsQUFRQSxDQWxEakIsQUFzRnFCLEdBZkMsQUFvQ3BCLENBL0JnQixDQTFDQyxBQW9GRyxFQXhGRixFQXZCUCxDQXdHUSxDQTFGSyxBQXdDekIsQUFxQkEsR0F2Q1ksQUFRQSxDQWdETSxJQVpOLENBL0VGLEFBcUVLLENBWmtCLEFBc0RoQyxDQXBGZSxDQXFDaEIsRUF6Q0EsQUFhaUIsQUFRQSxBQTRERCxDQXhISixFQTRHb0IsQ0EzRmQsQ0ErRXlCLEdBbEVyQixDQXdEdEIsRUFsRlcsQUFxSEUsQ0F4SGQsQUEyQ29CLElBU0MsQUFRQSxJQTZEbkIsQ0F4R2UsQ0FiakIsS0EwQkEsQ0EyQzRCLEVBN0JmLEFBZ0VVLEtBdkR0QixBQVFBLENBM0NtQixLQTJCbkIsTUFtRG1CLEFBYXFCLE9BMUYzQixBQXVEYixXQXVCa0IsQ0E3RUUsZ0JBOEVELEFBWWxCLEdBekZnQixlQThFRCxDQTdFQyxjQThFSCxFQTdFZixXQThFZ0IsY0FDZiIsImZpbGUiOiIvVXNlcnMvanVzdGluL0Rlc2t0b3AvcHJpdmF0ZS9ibG9nLW1vYmlsZS9wYWdlcy9tZXNzYWdlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExheW91dCBmcm9tICcuLi9jb21wb25lbnRzL2xheW91dCdcbmltcG9ydCB7Z2V0VHBWYWx1ZX0gZnJvbSAnLi4vdXRpbHMvYmxvZ190eXBlcydcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50J1xuaW1wb3J0IHthcGlIb3N0LGF2YXRhcnN9IGZyb20gJy4uL3V0aWxzL2NvbmZpZyc7XG5pbXBvcnQgcHJvdG9idWYgZnJvbSBcIi4uL3Byb3RvL2Jsb2dfcGJcIjtcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcydcbmltcG9ydCByZWFkU3RyZWFtIGZyb20gJy4uL3V0aWxzL3V0aWwnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIGFzeW5jIGdldEluaXRpYWxQcm9wcyh7IHJlcSxxdWVyeSxqc29uUGFnZVJlcyB9KSB7XG4gICAgY29uc3QgdXNlckFnZW50ID0gcmVxID8gcmVxLmhlYWRlcnNbJ3VzZXItYWdlbnQnXSA6IG5hdmlnYXRvci51c2VyQWdlbnRcbiAgICByZXR1cm4geyB1c2VyQWdlbnQscXVlcnksanNvblBhZ2VSZXMgfVxuICB9XG5cbiAgc3RhdGUgPSB7XG4gICAgICBibG9nRHRhaWw6XCJcIixcbiAgICAgIGRldGFpbERhdGE6e30sXG4gICAgICBjb21tZW50c0xpc3Q6W10sXG4gICAgICBjb21tZW50VG90YWw6MCxcbiAgICAgIHNheXRleHQ6XCJcIixcbiAgICAgIHN1Ym1pdERpc2I6ZmFsc2UsXG4gICAgICBzdWJtaXRUeHQ6XCLmj5DkuqRcIlxuICB9XG5cbiAgYXN5bmMgZ2V0Q29tbWVudHMoKXtcbiAgICBsZXQgY29tbWVudFJlcyA9IGF3YWl0IGF4aW9zLmdldChgJHthcGlIb3N0fS92MS9ibG9nL21lc3NhZ2Vib2FyZC9saXN0YCx7XG4gICAgICByZXNwb25zZVR5cGU6ICdibG9iJ1xuICAgIH0pXG4gICAgbGV0IGNvbW1lbnREYXRhID0gYXdhaXQgcmVhZFN0cmVhbShjb21tZW50UmVzLmRhdGEpO1xuICAgIGxldCBjb21tZW50TWVzc2FnZSA9IHByb3RvYnVmLmJsb2dDb21tZW50cy5kZXNlcmlhbGl6ZUJpbmFyeShjb21tZW50RGF0YSk7XG4gICAgY29tbWVudE1lc3NhZ2UgPSBjb21tZW50TWVzc2FnZS50b09iamVjdCgpO1xuICAgIGNvbnNvbGUubG9nKGNvbW1lbnRNZXNzYWdlKVxuICAgIHRoaXMuc2V0U3RhdGUoe2NvbW1lbnRzTGlzdDpjb21tZW50TWVzc2FnZS5saXN0TGlzdCxjb21tZW50VG90YWw6Y29tbWVudE1lc3NhZ2UudG90YWx9KVxuICB9XG5cbiAgYXN5bmMgY29tcG9uZW50RGlkTW91bnQoKXtcbiAgICBhd2FpdCB0aGlzLmdldENvbW1lbnRzKCk7XG4gICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0XCIpLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsXCJzaGFkb3dub25lXCIpXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYWRpbmdcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH0sNTAwKVxuICB9XG5cbiAgYXN5bmMgc3ViTWl0Q29tbWVudChldmVudCl7XG4gICAgdmFyIGUgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgaWYgKGUgJiYgZS5rZXlDb2RlID09IDEzKSB7IC8v5Zue6L2m6ZSu55qE6ZSu5YC85Li6MTNcbiAgICAgIGxldCB7c2F5dGV4dH0gPSB0aGlzLnN0YXRlO1xuICAgICAgc2F5dGV4dCA9IHNheXRleHQucmVwbGFjZSgvXFxuL2csXCJcIilcbiAgICAgIGlmKHNheXRleHQgPT0gXCJcIil7XG4gICAgICAgIGFsZXJ0KFwi6K+E6K665YaF5a655LiN6IO95Li656m6XCIpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgbGV0IG1lc3NhZ2UgPSBuZXcgcHJvdG9idWYuYmxvZ0NvbW1lbnQoKTtcbiAgICAgICAgbWVzc2FnZS5zZXRDb250ZW50KHNheXRleHQpO1xuICAgICAgICBtZXNzYWdlLnNldEJsb2dJZCgwKTtcbiAgICAgIGxldCBieXRlcyA9IG1lc3NhZ2Uuc2VyaWFsaXplQmluYXJ5KCk7XG4gICAgICB0cnkge1xuICAgICAgICBsZXQgcmVzID0gYXdhaXQgYXhpb3MucG9zdChgJHthcGlIb3N0fS92MS9ibG9nL21lc3NhZ2Vib2FyZC9zdWJtaXRgLGJ5dGVzLHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSd9fSlcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRDb21tZW50cygpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYoZXJyb3IgPT0gXCJFcnJvcjogUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSA0MDBcIil7XG4gICAgICAgICAgYWxlcnQoXCLor4TorrrlhoXlrrnkuI3og73kuLrnqbpcIilcbiAgICAgICAgfWVsc2UgaWYoZXJyb3IgPT0gXCJFcnJvcjogUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSA1MDBcIil7XG4gICAgICAgICAgYWxlcnQoXCLlhoXpg6jlh7rnjrDplJnor69cIilcbiAgICAgICAgfWVsc2UgaWYoZXJyb3IgPT0gXCJFcnJvcjogUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSA0MDNcIil7XG4gICAgICAgICAgYWxlcnQoXCLku4rlpKnmgqjlr7nmlLnljZrlrqLnmoTor4Torrrlt7Lovr7liLDkuIrpmZBcIilcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7c2F5dGV4dDpcIlwifSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBtYWtlR29vZCgpe1xuICAgIGxldCB7ZGV0YWlsRGF0YX0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHtpZH0gPSB0aGlzLnByb3BzLnF1ZXJ5XG4gICAgbGV0IHJlcyA9IGF3YWl0IGF4aW9zLnBvc3QoYCR7YXBpSG9zdH0vdjEvYmxvZy9nb29kL21ha2U/YmxvZ19pZD0ke2lkfWApXG4gICAgZGV0YWlsRGF0YS5nb29kTnVtKytcbiAgICB0aGlzLnNldFN0YXRlKHtkZXRhaWxEYXRhfSlcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7YmxvZ0R0YWlsLGRldGFpbERhdGEsY29tbWVudHNMaXN0LHN1Ym1pdERpc2Isc2F5dGV4dCxjb21tZW50VG90YWwsc3VibWl0VHh0fSA9IHRoaXMuc3RhdGVcbiAgICByZXR1cm4gKFxuICAgICAgPExheW91dCB0aXRsZT17YOeVmeiogGB9PlxuICAgICAgICAgIDxkaXYgc3R5bGU9e3tiYWNrZ3JvdW5kOlwiI2ZmZlwifX0+IFxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e2NsZWFyOidib3RoJ319PjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJuZXdzX3BsXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnYmtvXCI+XG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnRzTGlzdC5tYXAoKGl0ZW0sayk9PihcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17a30gY2xhc3NOYW1lPVwiZmJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBzdHlsZT17e2JhY2tncm91bmQ6IGB1cmwoJHthdmF0YXJzW2l0ZW0uaWQlYXZhdGFycy5sZW5ndGhdfSkgbm8tcmVwZWF0IHRvcCAxNHB4IGxlZnQgMTBweGB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9e3tjb2xvcjpcIiMwMDBcIn19PntpdGVtLm5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmYnRpbWVcIj48c3Bhbj57bW9tZW50KGl0ZW0uY3JlYXRlVGltZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKX08L3NwYW4+PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmYmluZm9cIj57aXRlbS5jb250ZW50fTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IFxuICAgICAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwicGxwb3N0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInNheWluZ1wiIHN0eWxlPXtjb21tZW50c0xpc3QubGVuZ3RoID09IDAgPyB7bWFyZ2luVG9wOiA4fTp7fX0+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW4+PGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIHN0eWxlPXt7dGV4dERlY29yYXRpb246IFwibm9uZVwiLGNvbG9yOiBcIiNkZTE1MTNcIn19PuWFseaciXtjb21tZW50VG90YWx95p2h55WZ6KiAPC9hPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICDmnaXor7TkuKTlj6XlkKcuLi5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgbmFtZT1cInNheXRleHRcIiB2YWx1ZT17c2F5dGV4dH0gb25DaGFuZ2U9eyhlKT0+e1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3NheXRleHQ6ZS50YXJnZXQudmFsdWV9KVxuICAgICAgICAgICAgICAgICAgICB9fSByb3dzPVwiNlwiIGlkPVwic2F5dGV4dFwiIG9uS2V5VXA9e3RoaXMuc3ViTWl0Q29tbWVudC5iaW5kKHRoaXMpfT48L3RleHRhcmVhPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgLm5leHRpbmZvIGF7XG4gICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICAgICAgICBjb2xvcjogIzU1NTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLm5leHRpbmZvIGE6aG92ZXJ7XG4gICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgICAgICAgICAgIGNvbG9yOiMyMjI7XG4gICAgICAgICAgfVxuICAgICAgICAgIC55em0ge1xuICAgICAgICAgICAgICBtYXJnaW46IDEwcHggMTBweCAxMHB4IDA7XG4gICAgICAgICAgfVxuICAgICAgICAgICNwbHBvc3R7XG4gICAgICAgICAgICBwYWRkaW5nOiAwIDEwcHg7XG4gICAgICAgICAgfVxuICAgICAgICAgICNwbHBvc3QgaW5wdXRbdHlwZT1cInN1Ym1pdFwiXSB7XG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMzMDMwMzA7XG4gICAgICAgICAgICBjb2xvcjogI2ZmZjtcbiAgICAgICAgICAgIGJvcmRlcjogMDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAzMHB4O1xuICAgICAgICAgICAgcGFkZGluZzogMCAyMHB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgICAgZmxvYXQ6IHJpZ2h0O1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEzcHg7XG4gICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDElO1xuICAgICAgICAgIH1cbiAgICAgICAgICAjc2F5dGV4dCB7XG4gICAgICAgICAgICAgIHdpZHRoOiA5OSU7XG4gICAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgICAgICAgIHJlc2l6ZTogbm9uZTtcbiAgICAgICAgICAgICAgYm9yZGVyOiBzb2xpZCAxcHggI2NjYztcbiAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICB9XG4gICAgICAgICAgLnNheWluZyBzcGFuIHtcbiAgICAgICAgICAgICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgICAuc2F5aW5ne1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDMwcHg7XG4gICAgICAgICAgICBjb2xvcjogI2E5YTZhNjtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICAgfSBcbiAgICAgICAgICAgLm5ld3NfcGwgaDJ7XG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiAjMDAwIDJweCBzb2xpZDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiA0MHB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4O1xuICAgICAgICAgICAgY29sb3I6ICMwMDA7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgLmZidGltZXtcbiAgICAgICAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgICAgICAgIGNvbG9yOiAjOTk5O1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgd2lkdGg6IDY2cHg7XG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgfVxuICAgICAgICAgICAuZmJ0aW1lIHNwYW57XG4gICAgICAgICAgICBmbG9hdDogcmlnaHQ7XG4gICAgICAgICAgICBjb2xvcjogIzk5OTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICAgIHdpZHRoOiA2N3B4O1xuICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgcC5mYnRpbWV7XG4gICAgICAgICAgICBjb2xvcjogIzAwMDtcbiAgICAgICAgICAgfVxuICAgICAgICAgICBwLmZiaW5mb3tcbiAgICAgICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICAgICAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIC5mYiB1bHtcbiAgICAgICAgICAgIG1hcmdpbjogMTBweCAxMHB4O1xuICAgICAgICAgICAgcGFkZGluZzogMTBweCAxMHB4IDEwcHggNzBweDtcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b206ICNlY2VjZWMgMXB4IHNvbGlkO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiA0N3B4IDQ3cHg7XG4gICAgICAgICAgIH0gIFxuICAgICAgICAgICAubmV3c19wbHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgIG1hcmdpbjogMHB4IDAgMjBweCAwO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIC5uZXh0aW5mb3tcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4O1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgLm5leHRpbmZvID4gcHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMHB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgICB9XG4gICAgICAgICAgIC5kaWdnaXR7XG4gICAgICAgICAgICB3aWR0aDogMTYwcHg7XG4gICAgICAgICAgICBtYXJnaW46IGF1dG87XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAjRTI1MjNBO1xuICAgICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgICBib3gtc2hhZG93OiAxcHggMnB4IDZweCAwcHggcmdiYSgwLDAsMCwuMik7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICAgICAgICBsaW5lLWhlaWdodDogNDBweDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgfVxuICAgICAgICAgICAubmV3c19hYm91dCB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICM4ODg4ODg7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI0YzRjNGMztcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMjBweCBhdXRvIDE1cHggYXV0bztcbiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMjNweDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBub25lIHJlcGVhdCAwIDAgI0Y2RjZGNjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5ibG9naW5mbyB7XG4gICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLm5ld3NfdGl0bGUge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogbm9ybWFsO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDIwcHggMDtcbiAgICAgICAgICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgICAgICAgICAgICBtYXJnaW46MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5ibG9naW5mbyBsaSB7XG4gICAgICAgICAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xuICAgICAgICAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYH08L3N0eWxlPlxuICAgICAgPC9MYXlvdXQ+ICAgICBcbiAgICApXG4gIH1cbn1cblxuXG4iXX0= */\\n/*@ sourceURL=/Users/justin/Desktop/private/blog-mobile/pages/message.js */\"));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(_ref) {\n        var req, query, jsonPageRes, userAgent;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                req = _ref.req, query = _ref.query, jsonPageRes = _ref.jsonPageRes;\n                userAgent = req ? req.headers['user-agent'] : navigator.userAgent;\n                return _context5.abrupt(\"return\", {\n                  userAgent: userAgent,\n                  query: query,\n                  jsonPageRes: jsonPageRes\n                });\n\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function getInitialProps(_x2) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return _default;\n}(React.Component);\n\nexport { _default as default };","map":{"version":3,"sources":["/Users/justin/Desktop/private/blog-mobile/pages/message.js"],"names":["Layout","getTpValue","moment","apiHost","avatars","protobuf","axios","readStream","blogDtail","detailData","commentsList","commentTotal","saytext","submitDisb","submitTxt","get","responseType","commentRes","data","commentData","commentMessage","blogComments","deserializeBinary","toObject","console","log","setState","listList","total","getComments","setTimeout","document","getElementById","setAttribute","style","display","event","e","window","keyCode","state","replace","alert","message","blogComment","setContent","setBlogId","bytes","serializeBinary","post","headers","res","id","props","query","goodNum","background","clear","map","item","k","length","color","name","createTime","format","content","marginTop","textDecoration","target","value","subMitComment","bind","req","jsonPageRes","userAgent","navigator","React","Component"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,SAAQC,UAAR,QAAyB,qBAAzB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAAQC,OAAR,EAAgBC,OAAhB,QAA8B,iBAA9B;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,eAAvB;;;;;;;;;;;;;;;;;;;;4DAQU;AACJC,MAAAA,SAAS,EAAC,EADN;AAEJC,MAAAA,UAAU,EAAC,EAFP;AAGJC,MAAAA,YAAY,EAAC,EAHT;AAIJC,MAAAA,YAAY,EAAC,CAJT;AAKJC,MAAAA,OAAO,EAAC,EALJ;AAMJC,MAAAA,UAAU,EAAC,KANP;AAOJC,MAAAA,SAAS,EAAC;AAPN,K;;;;;;;;;;;;;;;;;uBAWiBR,KAAK,CAACS,GAAN,WAAaZ,OAAb,iCAAiD;AACtEa,kBAAAA,YAAY,EAAE;AADwD,iBAAjD,C;;;AAAnBC,gBAAAA,U;;uBAGoBV,UAAU,CAACU,UAAU,CAACC,IAAZ,C;;;AAA9BC,gBAAAA,W;AACAC,gBAAAA,c,GAAiBf,QAAQ,CAACgB,YAAT,CAAsBC,iBAAtB,CAAwCH,WAAxC,C;AACrBC,gBAAAA,cAAc,GAAGA,cAAc,CAACG,QAAf,EAAjB;AACAC,gBAAAA,OAAO,CAACC,GAAR,CAAYL,cAAZ;AACA,qBAAKM,QAAL,CAAc;AAAChB,kBAAAA,YAAY,EAACU,cAAc,CAACO,QAA7B;AAAsChB,kBAAAA,YAAY,EAACS,cAAc,CAACQ;AAAlE,iBAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;uBAIM,KAAKC,WAAL,E;;;AACNC,gBAAAA,UAAU,CAAC,YAAI;AACbC,kBAAAA,QAAQ,CAACC,cAAT,CAAwB,GAAxB,EAA6BC,YAA7B,CAA0C,OAA1C,EAAkD,YAAlD;AACAF,kBAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCE,KAAnC,CAAyCC,OAAzC,GAAmD,MAAnD;AACD,iBAHS,EAGR,GAHQ,CAAV;;;;;;;;;;;;;;;;;;;;;iDAMkBC,K;;;;;;AACdC,gBAAAA,C,GAAID,KAAK,IAAIE,MAAM,CAACF,K;;sBACpBC,CAAC,IAAIA,CAAC,CAACE,OAAF,IAAa,E;;;;;AAAM;AACrB3B,gBAAAA,O,GAAW,KAAK4B,K,CAAhB5B,O;AACLA,gBAAAA,OAAO,GAAGA,OAAO,CAAC6B,OAAR,CAAgB,KAAhB,EAAsB,EAAtB,CAAV;;sBACG7B,OAAO,IAAI,E;;;;;AACZ8B,gBAAAA,KAAK,CAAC,UAAD,CAAL;;;;AAGEC,gBAAAA,O,GAAU,IAAItC,QAAQ,CAACuC,WAAb,E;AACZD,gBAAAA,OAAO,CAACE,UAAR,CAAmBjC,OAAnB;AACA+B,gBAAAA,OAAO,CAACG,SAAR,CAAkB,CAAlB;AACEC,gBAAAA,K,GAAQJ,OAAO,CAACK,eAAR,E;;;uBAEM1C,KAAK,CAAC2C,IAAN,WAAc9C,OAAd,mCAAoD4C,KAApD,EAA0D;AAACG,kBAAAA,OAAO,EAAE;AAAC,oCAAe;AAAhB;AAAV,iBAA1D,C;;;AAAZC,gBAAAA,G;;uBACE,KAAKtB,WAAL,E;;;;;;;;;;AAEN,oBAAG,gBAAS,4CAAZ,EAAyD;AACvDa,kBAAAA,KAAK,CAAC,UAAD,CAAL;AACD,iBAFD,MAEM,IAAG,gBAAS,4CAAZ,EAAyD;AAC7DA,kBAAAA,KAAK,CAAC,QAAD,CAAL;AACD,iBAFK,MAEA,IAAG,gBAAS,4CAAZ,EAAyD;AAC7DA,kBAAAA,KAAK,CAAC,iBAAD,CAAL;AACD;;;AAEH,qBAAKhB,QAAL,CAAc;AAACd,kBAAAA,OAAO,EAAC;AAAT,iBAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKGH,gBAAAA,U,GAAc,KAAK+B,K,CAAnB/B,U;AACE2C,gBAAAA,E,GAAM,KAAKC,KAAL,CAAWC,K,CAAjBF,E;;uBACS9C,KAAK,CAAC2C,IAAN,WAAc9C,OAAd,wCAAmDiD,EAAnD,E;;;AAAZD,gBAAAA,G;AACJ1C,gBAAAA,UAAU,CAAC8C,OAAX;AACA,qBAAK7B,QAAL,CAAc;AAACjB,kBAAAA,UAAU,EAAVA;AAAD,iBAAd;;;;;;;;;;;;;;;;;;6BAGO;AAAA;;AAAA,wBAC+E,KAAK+B,KADpF;AAAA,UACAhC,SADA,eACAA,SADA;AAAA,UACUC,UADV,eACUA,UADV;AAAA,UACqBC,YADrB,eACqBA,YADrB;AAAA,UACkCG,UADlC,eACkCA,UADlC;AAAA,UAC6CD,OAD7C,eAC6CA,OAD7C;AAAA,UACqDD,YADrD,eACqDA,YADrD;AAAA,UACkEG,SADlE,eACkEA,SADlE;AAEP,aACE,oBAAC,MAAD;AAAQ,QAAA,KAAK,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,KAAK,EAAE;AAAC0C,UAAAA,UAAU,EAAC;AAAZ,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,KAAK,EAAE;AAACC,UAAAA,KAAK,EAAC;AAAP,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAA,4CAAe,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA,4CAAe,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI/C,YAAY,CAACgD,GAAb,CAAiB,UAACC,IAAD,EAAMC,CAAN;AAAA,eACf;AAAK,UAAA,GAAG,EAAEA,CAAV;AAAA,8CAAuB,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAI,UAAA,KAAK,EAAE;AAACJ,YAAAA,UAAU,gBAASpD,OAAO,CAACuD,IAAI,CAACP,EAAL,GAAQhD,OAAO,CAACyD,MAAjB,CAAhB;AAAX,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAM,UAAA,KAAK,EAAE;AAACC,YAAAA,KAAK,EAAC;AAAP,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA8BH,IAAI,CAACI,IAAnC,CADF,EAEE;AAAA,8CAAa,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAO7D,MAAM,CAACyD,IAAI,CAACK,UAAN,CAAN,CAAwBC,MAAxB,CAA+B,YAA/B,CAAP,CAAtB,CAFF,EAGE;AAAA,8CAAa,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAuBN,IAAI,CAACO,OAA5B,CAHF,CADF,CADe;AAAA,OAAjB,CAFJ,EAYE;AAAK,QAAA,EAAE,EAAC,QAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAsB,QAAA,KAAK,EAAExD,YAAY,CAACmD,MAAb,IAAuB,CAAvB,GAA2B;AAACM,UAAAA,SAAS,EAAE;AAAZ,SAA3B,GAA0C,EAAvE;AAAA,4CAAa,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAM;AAAG,QAAA,IAAI,EAAC,oBAAR;AAA6B,QAAA,KAAK,EAAE;AAACC,UAAAA,cAAc,EAAE,MAAjB;AAAwBN,UAAAA,KAAK,EAAE;AAA/B,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAkFnD,YAAlF,uBAAN,CADF,sCADF,EAKE;AAAU,QAAA,IAAI,EAAC,SAAf;AAAyB,QAAA,KAAK,EAAEC,OAAhC;AAAyC,QAAA,QAAQ,EAAE,kBAACyB,CAAD,EAAK;AACtD,UAAA,MAAI,CAACX,QAAL,CAAc;AAACd,YAAAA,OAAO,EAACyB,CAAC,CAACgC,MAAF,CAASC;AAAlB,WAAd;AACD,SAFD;AAEG,QAAA,IAAI,EAAC,GAFR;AAEY,QAAA,EAAE,EAAC,SAFf;AAEyB,QAAA,OAAO,EAAE,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAFlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CAZF,CADJ,CAFF,CADJ;AAAA;AAAA;AAAA,0kcADF;AAmKD;;;;;;;;;;;;AA5O8BC,gBAAAA,G,QAAAA,G,EAAInB,K,QAAAA,K,EAAMoB,W,QAAAA,W;AACjCC,gBAAAA,S,GAAYF,GAAG,GAAGA,GAAG,CAACvB,OAAJ,CAAY,YAAZ,CAAH,GAA+B0B,SAAS,CAACD,S;kDACvD;AAAEA,kBAAAA,SAAS,EAATA,SAAF;AAAYrB,kBAAAA,KAAK,EAALA,KAAZ;AAAkBoB,kBAAAA,WAAW,EAAXA;AAAlB,iB;;;;;;;;;;;;;;;;;;;EAHkBG,KAAK,CAACC,S","sourcesContent":["import Layout from '../components/layout'\nimport {getTpValue} from '../utils/blog_types'\nimport moment from 'moment'\nimport {apiHost,avatars} from '../utils/config';\nimport protobuf from \"../proto/blog_pb\";\nimport axios from 'axios'\nimport readStream from '../utils/util'\n\nexport default class extends React.Component {\n  static async getInitialProps({ req,query,jsonPageRes }) {\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\n    return { userAgent,query,jsonPageRes }\n  }\n\n  state = {\n      blogDtail:\"\",\n      detailData:{},\n      commentsList:[],\n      commentTotal:0,\n      saytext:\"\",\n      submitDisb:false,\n      submitTxt:\"提交\"\n  }\n\n  async getComments(){\n    let commentRes = await axios.get(`${apiHost}/v1/blog/messageboard/list`,{\n      responseType: 'blob'\n    })\n    let commentData = await readStream(commentRes.data);\n    let commentMessage = protobuf.blogComments.deserializeBinary(commentData);\n    commentMessage = commentMessage.toObject();\n    console.log(commentMessage)\n    this.setState({commentsList:commentMessage.listList,commentTotal:commentMessage.total})\n  }\n\n  async componentDidMount(){\n    await this.getComments();\n    setTimeout(()=>{\n      document.getElementById(\"t\").setAttribute(\"class\",\"shadownone\")\n      document.getElementById(\"loading\").style.display = \"none\";\n    },500)\n  }\n\n  async subMitComment(event){\n    var e = event || window.event;\n    if (e && e.keyCode == 13) { //回车键的键值为13\n      let {saytext} = this.state;\n      saytext = saytext.replace(/\\n/g,\"\")\n      if(saytext == \"\"){\n        alert(\"评论内容不能为空\")\n        return\n      }\n      let message = new protobuf.blogComment();\n        message.setContent(saytext);\n        message.setBlogId(0);\n      let bytes = message.serializeBinary();\n      try {\n        let res = await axios.post(`${apiHost}/v1/blog/messageboard/submit`,bytes,{headers: {'Content-Type':'application/octet-stream'}})\n        await this.getComments();\n      } catch (error) {\n        if(error == \"Error: Request failed with status code 400\"){\n          alert(\"评论内容不能为空\")\n        }else if(error == \"Error: Request failed with status code 500\"){\n          alert(\"内部出现错误\")\n        }else if(error == \"Error: Request failed with status code 403\"){\n          alert(\"今天您对改博客的评论已达到上限\")\n        }\n      }\n      this.setState({saytext:\"\"})\n    }\n  }\n\n  async makeGood(){\n    let {detailData} = this.state;\n    const {id} = this.props.query\n    let res = await axios.post(`${apiHost}/v1/blog/good/make?blog_id=${id}`)\n    detailData.goodNum++\n    this.setState({detailData})\n  }\n\n  render() {\n    const {blogDtail,detailData,commentsList,submitDisb,saytext,commentTotal,submitTxt} = this.state\n    return (\n      <Layout title={`留言`}>\n          <div style={{background:\"#fff\"}}> \n            <div style={{clear:'both'}}></div>\n            <div className=\"news_pl\">\n                <div className=\"gbko\">\n                  {\n                    commentsList.map((item,k)=>(\n                      <div key={k} className=\"fb\">\n                        <ul style={{background: `url(${avatars[item.id%avatars.length]}) no-repeat top 14px left 10px`}}>\n                          <span style={{color:\"#000\"}}>{item.name}</span>\n                          <p className=\"fbtime\"><span>{moment(item.createTime).format(\"YYYY-MM-DD\")}</span></p>\n                          <p className=\"fbinfo\">{item.content}</p>\n                        </ul>\n                      </div> \n                    ))\n                  }                 \n                  <div id=\"plpost\">\n                    <p className=\"saying\" style={commentsList.length == 0 ? {marginTop: 8}:{}}>\n                      <span><a href=\"javascript:void(0)\" style={{textDecoration: \"none\",color: \"#de1513\"}}>共有{commentTotal}条留言</a></span>\n                      来说两句吧...\n                    </p>\n                    <textarea name=\"saytext\" value={saytext} onChange={(e)=>{\n                      this.setState({saytext:e.target.value})\n                    }} rows=\"6\" id=\"saytext\" onKeyUp={this.subMitComment.bind(this)}></textarea>\n                  </div>\n                </div>\n            </div>\n          </div>\n          <style jsx>{`\n          .nextinfo a{\n            text-decoration: none;\n            color: #555;\n          }\n          .nextinfo a:hover{\n            text-decoration: underline;\n            color:#222;\n          }\n          .yzm {\n              margin: 10px 10px 10px 0;\n          }\n          #plpost{\n            padding: 0 10px;\n          }\n          #plpost input[type=\"submit\"] {\n            display: block;\n            background: #303030;\n            color: #fff;\n            border: 0;\n            line-height: 30px;\n            padding: 0 20px;\n            border-radius: 5px;\n            float: right;\n            margin-bottom: 20px;\n            margin-top: 13px;\n            margin-right: 1%;\n          }\n          #saytext {\n              width: 99%;\n              outline: none;\n              resize: none;\n              border: solid 1px #ccc;\n              margin-bottom: 20px;\n          }\n          .saying span {\n                float: right;\n          }\n           .saying{\n            line-height: 30px;\n            color: #a9a6a6;\n            margin-bottom: 8px;\n           } \n           .news_pl h2{\n            border-bottom: #000 2px solid;\n            line-height: 40px;\n            font-size: 14px;\n            padding-left: 10px;\n            color: #000;\n           }\n           .fbtime{\n            float: right;\n            color: #999;\n            font-size: 12px;\n            width: 66px;\n            overflow: hidden;\n            white-space: nowrap;\n           }\n           .fbtime span{\n            float: right;\n            color: #999;\n            font-size: 12px;\n            width: 67px;\n            overflow: hidden;\n            white-space: nowrap;\n           }\n           p.fbtime{\n            color: #000;\n           }\n           p.fbinfo{\n            margin: 10px 0;\n            word-wrap: break-word;\n           }\n           .fb ul{\n            margin: 10px 10px;\n            padding: 10px 10px 10px 70px;\n            border-bottom: #ececec 1px solid;\n            background-size: 47px 47px;\n           }  \n           .news_pl{\n            width: 100%;\n            overflow: hidden;\n            margin: 0px 0 20px 0;\n           }\n           .nextinfo{\n            line-height: 24px;\n            width: 100%;\n            overflow: hidden;\n            margin: 20px 0;\n           }\n           .nextinfo > p{\n            padding: 4px 10px;\n            border-radius: 5px;\n           }\n           .diggit{\n            width: 160px;\n            margin: auto;\n            background: #E2523A;\n            color: #fff;\n            box-shadow: 1px 2px 6px 0px rgba(0,0,0,.2);\n            border-radius: 3px;\n            line-height: 40px;\n            text-align: center;\n            cursor: pointer;\n            outline: none;\n            display: block;\n           }\n           .news_about {\n                color: #888888;\n                border: 1px solid #F3F3F3;\n                padding: 10px;\n                margin: 20px auto 15px auto;\n                line-height: 23px;\n                background: none repeat 0 0 #F6F6F6;\n            }\n            .bloginfo {\n              width: 100%;\n              overflow: hidden;\n            }\n            .news_title {\n                font-size: 24px;\n                font-weight: normal;\n                padding: 20px 0;\n                color: #333;\n                margin:0;\n            }\n            .bloginfo li {\n                float: left;\n                margin-right: 20px;\n                list-style: none;\n            }\n          `}</style>\n      </Layout>     \n    )\n  }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}